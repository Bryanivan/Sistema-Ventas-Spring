<!doctype html>
<html lang="en">
<!--tÃ­tulo de web, metas, dependencias CSS/JS-->
<head th:include="fragments/header :: header">
</head>

<body>
    <div class="wrapper">
        <div th:include="fragments/sidenav :: sidenav" class="sidebar" data-color="purple" data-image="../static/img/sidebar-1.jpg" th:data-image="@{/img/sidebar-1.png}"></div>

        <div class="main-panel">
            <nav th:include="fragments/navbar :: navbar" class="navbar navbar-transparent navbar-absolute"></nav>
            <div class="content">
                <div class="container-fluid">
                    <div class="row">                        
                        <div class="col-md-12">
                            <div class="card productos">
                                <div class="card-header" data-background-color="purple">
                                    <h4 class="title">Productos</h4>
                                    <p class="category">Listado de productos</p>
                                </div>
                                <div class="card-content table-responsive">
                                	<form class="navbar-form navbar-right" role="search">
			                            <div class="form-group  is-empty">
			                                <input type="text" class="form-control" placeholder="Buscar">
			                                <span class="material-input"></span>
			                            </div>
			                            <button type="submit" class="btn btn-white btn-round btn-just-icon">
			                                <i class="material-icons">search</i>
			                                <div class="ripple-container"></div>
			                            </button>
			                        </form>
                                    <table class="table lista">
                                        <thead class="text-primary">
                                            <th>Nombre</th>
                                            <th>Precio compra</th>
                                            <th>Precio venta</th>
                                            <th>Precio por 7 unid.</th>
                                            <th>Precio por 15 unid.</th>
                                            <th>Stock</th>
                                            <th>Acciones</th>
                                        </thead>
                                        <tbody>                                            
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--footer-->
            <footer class="footer" th:replace="fragments/footer :: footer"></footer> 
        
        </div>
    </div>

    <!--dependencias JS-->
    <div th:replace="fragments/footer_dependencies :: dependencies"></div> 

    <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                url:'/productos',
                method:'get',
                success:(resp)=>{
                	console.log(resp);
                    if(resp.error==0){//respuesta sin errores
                        productos=resp.data;                        
                        console.log(productos);
                        for(var i in productos){
                            let {descripcion,precioCompra,precioVenta,precioPack7,precioPack15,stock}=productos[i];
                            $('.productos .lista tbody').append(`<tr>
                                                                    <td>${descripcion}</td>
                                                                    <td class="text-primary">${precioCompra}</td>
                                                                    <td class="text-primary">${precioVenta}</td>
                                                                    <td class="text-primary">${precioPack7}</td>
                                                                    <td class="text-primary">${precioPack15}</td>
                                                                    <td class="text-primary">${stock}</td>
                                                                    <td><a href=""><i class="material-icons">border_color</i></a></td>
                                                                 </tr>`);
                            
                        }

                    }
                }
            });
        });

    </script>

</body>


</html>